(function(){var e=function(t,n){var r=e.resolve(t,n||"/"),i=e.modules[r];if(!i)throw new Error("Failed to resolve module "+t+", tried "+r);var s=e.cache[r],o=s?s.exports:i();return o};e.paths=[],e.modules={},e.cache={},e.extensions=[".js",".coffee",".json"],e._core={assert:!0,events:!0,fs:!0,path:!0,vm:!0},e.resolve=function(){return function(t,n){function u(t){t=r.normalize(t);if(e.modules[t])return t;for(var n=0;n<e.extensions.length;n++){var i=e.extensions[n];if(e.modules[t+i])return t+i}}function a(t){t=t.replace(/\/+$/,"");var n=r.normalize(t+"/package.json");if(e.modules[n]){var i=e.modules[n](),s=i.browserify;if(typeof s=="object"&&s.main){var o=u(r.resolve(t,s.main));if(o)return o}else if(typeof s=="string"){var o=u(r.resolve(t,s));if(o)return o}else if(i.main){var o=u(r.resolve(t,i.main));if(o)return o}}return u(t+"/index")}function f(e,t){var n=l(t);for(var r=0;r<n.length;r++){var i=n[r],s=u(i+"/"+e);if(s)return s;var o=a(i+"/"+e);if(o)return o}var s=u(e);if(s)return s}function l(e){var t;e==="/"?t=[""]:t=r.normalize(e).split("/");var n=[];for(var i=t.length-1;i>=0;i--){if(t[i]==="node_modules")continue;var s=t.slice(0,i+1).join("/")+"/node_modules";n.push(s)}return n}n||(n="/");if(e._core[t])return t;var r=e.modules.path();n=r.resolve("/",n);var i=n||"/";if(t.match(/^(?:\.\.?\/|\/)/)){var s=u(r.resolve(i,t))||a(r.resolve(i,t));if(s)return s}var o=f(t,i);if(o)return o;throw new Error("Cannot find module '"+t+"'")}}(),e.alias=function(t,n){var r=e.modules.path(),i=null;try{i=e.resolve(t+"/package.json","/")}catch(s){i=e.resolve(t,"/")}var o=r.dirname(i),u=(Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t})(e.modules);for(var a=0;a<u.length;a++){var f=u[a];if(f.slice(0,o.length+1)===o+"/"){var l=f.slice(o.length);e.modules[n+l]=e.modules[o+l]}else f===o&&(e.modules[n]=e.modules[o])}},function(){var t={},n=typeof window!="undefined"?window:{},r=!1;e.define=function(i,s){!r&&e.modules.__browserify_process&&(t=e.modules.__browserify_process(),r=!0);var o=e._core[i]?"":e.modules.path().dirname(i),u=function(t){var n=e(t,o),r=e.cache[e.resolve(t,o)];return r&&r.parent===null&&(r.parent=a),n};u.resolve=function(t){return e.resolve(t,o)},u.modules=e.modules,u.define=e.define,u.cache=e.cache;var a={id:i,filename:i,exports:{},loaded:!1,parent:null};e.modules[i]=function(){return e.cache[i]=a,s.call(a.exports,u,a,a.exports,o,i,t,n),a.loaded=!0,a.exports}}}(),e.define("path",function(e,t,n,r,i,s,o){function u(e,t){var n=[];for(var r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}function a(e,t){var n=0;for(var r=e.length;r>=0;r--){var i=e[r];i=="."?e.splice(r,1):i===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var f=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;n.resolve=function(){var e="",t=!1;for(var n=arguments.length;n>=-1&&!t;n--){var r=n>=0?arguments[n]:s.cwd();if(typeof r!="string"||!r)continue;e=r+"/"+e,t=r.charAt(0)==="/"}return e=a(u(e.split("/"),function(e){return!!e}),!t).join("/"),(t?"/":"")+e||"."},n.normalize=function(e){var t=e.charAt(0)==="/",n=e.slice(-1)==="/";return e=a(u(e.split("/"),function(e){return!!e}),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(u(e,function(e,t){return e&&typeof e=="string"}).join("/"))},n.dirname=function(e){var t=f.exec(e)[1]||"",n=!1;return t?t.length===1||n&&t.length<=3&&t.charAt(1)===":"?t:t.substring(0,t.length-1):"."},n.basename=function(e,t){var n=f.exec(e)[2]||"";return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return f.exec(e)[3]||""}}),e.define("__browserify_process",function(e,t,n,r,i,s,o){var s=t.exports={};s.nextTick=function(){var e=typeof window!="undefined"&&window.setImmediate,t=typeof window!="undefined"&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){if(e.source===window&&e.data==="browserify-tick"){e.stopPropagation();if(n.length>0){var t=n.shift();t()}}},!0),function(t){n.push(t),window.postMessage("browserify-tick","*")}}return function(t){setTimeout(t,0)}}(),s.title="browser",s.browser=!0,s.env={},s.argv=[],s.binding=function(t){if(t==="evals")return e("vm");throw new Error("No such module. (Possibly not yet loaded)")},function(){var t="/",n;s.cwd=function(){return t},s.chdir=function(r){n||(n=e("path")),t=n.resolve(r,t)}}()}),e.define("stream",function(e,t,n,r,i,s,o){function f(){u.EventEmitter.call(this)}var u=e("events"),a=e("util");a.inherits(f,u.EventEmitter),t.exports=f,f.Stream=f,f.prototype.pipe=function(e,t){function r(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}function o(){if(s)return;s=!0,e._pipeCount--,f();if(e._pipeCount>0)return;e.end()}function u(){if(s)return;s=!0,e._pipeCount--,f();if(e._pipeCount>0)return;e.destroy()}function a(e){f();if(this.listeners("error").length===0)throw e}function f(){n.removeListener("data",r),e.removeListener("drain",i),n.removeListener("end",o),n.removeListener("close",u),n.removeListener("error",a),e.removeListener("error",a),n.removeListener("end",f),n.removeListener("close",f),e.removeListener("end",f),e.removeListener("close",f)}var n=this;n.on("data",r),e.on("drain",i),!e._isStdio&&(!t||t.end!==!1)&&(e._pipeCount=e._pipeCount||0,e._pipeCount++,n.on("end",o),n.on("close",u));var s=!1;return n.on("error",a),e.on("error",a),n.on("end",f),n.on("close",f),e.on("end",f),e.on("close",f),e.emit("pipe",n),e}}),e.define("events",function(e,t,n,r,i,s,o){s.EventEmitter||(s.EventEmitter=function(){});var u=n.EventEmitter=s.EventEmitter,a=typeof Array.isArray=="function"?Array.isArray:function(e){return Object.prototype.toString.call(e)==="[object Array]"},f=10;u.prototype.setMaxListeners=function(e){this._events||(this._events={}),this._events.maxListeners=e},u.prototype.emit=function(e){if(e==="error")if(!this._events||!this._events.error||a(this._events.error)&&!this._events.error.length)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var t=this._events[e];if(!t)return!1;if(typeof t=="function"){switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:var n=Array.prototype.slice.call(arguments,1);t.apply(this,n)}return!0}if(a(t)){var n=Array.prototype.slice.call(arguments,1),r=t.slice();for(var i=0,s=r.length;i<s;i++)r[i].apply(this,n);return!0}return!1},u.prototype.addListener=function(e,t){if("function"!=typeof t)throw new Error("addListener only takes instances of Function");this._events||(this._events={}),this.emit("newListener",e,t);if(!this._events[e])this._events[e]=t;else if(a(this._events[e])){if(!this._events[e].warned){var n;this._events.maxListeners!==undefined?n=this._events.maxListeners:n=f,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console.trace())}this._events[e].push(t)}else this._events[e]=[this._events[e],t];return this},u.prototype.on=u.prototype.addListener,u.prototype.once=function(e,t){var n=this;return n.on(e,function r(){n.removeListener(e,r),t.apply(this,arguments)}),this},u.prototype.removeListener=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[e])return this;var n=this._events[e];if(a(n)){var r=n.indexOf(t);if(r<0)return this;n.splice(r,1),n.length==0&&delete this._events[e]}else this._events[e]===t&&delete this._events[e];return this},u.prototype.removeAllListeners=function(e){return e&&this._events&&this._events[e]&&(this._events[e]=null),this},u.prototype.listeners=function(e){return this._events||(this._events={}),this._events[e]||(this._events[e]=[]),a(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]}}),e.define("util",function(e,t,n,r,i,s,o){function a(e){return e instanceof Array||Array.isArray(e)||e&&e!==Object.prototype&&a(e.__proto__)}function f(e){return e instanceof RegExp||typeof e=="object"&&Object.prototype.toString.call(e)==="[object RegExp]"}function l(e){if(e instanceof Date)return!0;if(typeof e!="object")return!1;var t=Date.prototype&&v(Date.prototype),n=e.__proto__&&v(e.__proto__);return JSON.stringify(n)===JSON.stringify(t)}function c(e){return e<10?"0"+e.toString(10):e.toString(10)}function p(){var e=new Date,t=[c(e.getHours()),c(e.getMinutes()),c(e.getSeconds())].join(":");return[e.getDate(),h[e.getMonth()],t].join(" ")}var u=e("events");n.print=function(){},n.puts=function(){},n.debug=function(){},n.inspect=function(e,t,r,i){function u(e,r){if(e&&typeof e.inspect=="function"&&e!==n&&(!e.constructor||e.constructor.prototype!==e))return e.inspect(r);switch(typeof e){case"undefined":return o("undefined","undefined");case"string":var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return o(i,"string");case"number":return o(""+e,"number");case"boolean":return o(""+e,"boolean")}if(e===null)return o("null","null");var c=d(e),h=t?v(e):c;if(typeof e=="function"&&h.length===0){if(f(e))return o(""+e,"regexp");var p=e.name?": "+e.name:"";return o("[Function"+p+"]","special")}if(l(e)&&h.length===0)return o(e.toUTCString(),"date");var m,g,y;a(e)?(g="Array",y=["[","]"]):(g="Object",y=["{","}"]);if(typeof e=="function"){var b=e.name?": "+e.name:"";m=f(e)?" "+e:" [Function"+b+"]"}else m="";l(e)&&(m=" "+e.toUTCString());if(h.length===0)return y[0]+m+y[1];if(r<0)return f(e)?o(""+e,"regexp"):o("[Object]","special");s.push(e);var w=h.map(function(t){var n,i;e.__lookupGetter__&&(e.__lookupGetter__(t)?e.__lookupSetter__(t)?i=o("[Getter/Setter]","special"):i=o("[Getter]","special"):e.__lookupSetter__(t)&&(i=o("[Setter]","special"))),c.indexOf(t)<0&&(n="["+t+"]"),i||(s.indexOf(e[t])<0?(r===null?i=u(e[t]):i=u(e[t],r-1),i.indexOf("\n")>-1&&(a(e)?i=i.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):i="\n"+i.split("\n").map(function(e){return"   "+e}).join("\n"))):i=o("[Circular]","special"));if(typeof n=="undefined"){if(g==="Array"&&t.match(/^\d+$/))return i;n=JSON.stringify(""+t),n.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(n=n.substr(1,n.length-2),n=o(n,"name")):(n=n.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),n=o(n,"string"))}return n+": "+i});s.pop();var E=0,S=w.reduce(function(e,t){return E++,t.indexOf("\n")>=0&&E++,e+t.length+1},0);return S>50?w=y[0]+(m===""?"":m+"\n ")+" "+w.join(",\n  ")+" "+y[1]:w=y[0]+m+" "+w.join(", ")+" "+y[1],w}var s=[],o=function(e,t){var n={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r={special:"cyan",number:"blue","boolean":"yellow","undefined":"grey","null":"bold",string:"green",date:"magenta",regexp:"red"}[t];return r?"["+n[r][0]+"m"+e+"["+n[r][1]+"m":e};return i||(o=function(e,t){return e}),u(e,typeof r=="undefined"?2:r)};var h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(e){},n.pump=null;var d=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},v=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.hasOwnProperty.call(e,n)&&t.push(n);return t},m=Object.create||function(e,t){var n;if(e===null)n={__proto__:null};else{if(typeof e!="object")throw new TypeError("typeof prototype["+typeof e+"] != 'object'");var r=function(){};r.prototype=e,n=new r,n.__proto__=e}return typeof t!="undefined"&&Object.defineProperties&&Object.defineProperties(n,t),n};n.inherits=function(e,t){e.super_=t,e.prototype=m(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})};var g=/%[sdj%]/g;n.format=function(e){if(typeof e!="string"){var t=[];for(var r=0;r<arguments.length;r++)t.push(n.inspect(arguments[r]));return t.join(" ")}var r=1,i=arguments,s=i.length,o=String(e).replace(g,function(e){if(e==="%%")return"%";if(r>=s)return e;switch(e){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":return JSON.stringify(i[r++]);default:return e}});for(var u=i[r];r<s;u=i[++r])u===null||typeof u!="object"?o+=" "+u:o+=" "+n.inspect(u);return o}}),e.define("/src/errors.coffee",function(e,t,n,r,i,s,o){(function(){var n,r;r=e("errno"),n=r.custom.createError("LevelUPError"),t.exports={LevelUPError:n,InitializationError:r.custom.createError("InitializationError",n),OpenError:r.custom.createError("OpenError",n),ReadError:r.custom.createError("ReadError",n),WriteError:r.custom.createError("WriteError",n),NotFoundError:r.custom.createError("NotFoundError",n),CloseError:r.custom.createError("CloseError",n)}}).call(this)}),e.define("/node_modules/errno/package.json",function(e,t,n,r,i,s,o){t.exports={main:"errno.js"}}),e.define("/node_modules/errno/errno.js",function(e,t,n,r,i,s,o){var u=t.exports.all=[{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},{errno:2,code:"EADDRINFO",description:"getaddrinfo error"},{errno:3,code:"EACCES",description:"permission denied"},{errno:4,code:"EAGAIN",description:"no more processes"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:""},{errno:7,code:"EAFNOSUPPORT",description:""},{errno:8,code:"EALREADY",description:""},{errno:9,code:"EBADF",description:"bad file descriptor"},{errno:10,code:"EBUSY",description:"resource busy or locked"},{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",description:"interrupted system call"},{errno:18,code:"EINVAL",description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},{errno:26,code:"ENOMEM",description:"not enough memory"},{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},{errno:35,code:"ENOSYS",description:"function not implemented"},{errno:36,code:"EPIPE",description:"broken pipe"},{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:""},{errno:42,code:"EAIFAMNOSUPPORT",description:""},{errno:44,code:"EAISERVICE",description:""},{errno:45,code:"EAISOCKTYPE",description:""},{errno:46,code:"ESHUTDOWN",description:""},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},{errno:52,code:"EXDEV",description:"cross-device link not permitted"},{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];t.exports.errno={"-1":u[0],0:u[1],1:u[2],2:u[3],3:u[4],4:u[5],5:u[6],6:u[7],7:u[8],8:u[9],9:u[10],10:u[11],11:u[12],12:u[13],13:u[14],14:u[15],15:u[16],16:u[17],17:u[18],18:u[19],19:u[20],20:u[21],21:u[22],22:u[23],23:u[24],24:u[25],25:u[26],26:u[27],27:u[28],28:u[29],29:u[30],31:u[31],32:u[32],33:u[33],34:u[34],35:u[35],36:u[36],37:u[37],38:u[38],39:u[39],40:u[40],41:u[41],42:u[42],44:u[43],45:u[44],46:u[45],47:u[46],48:u[47],49:u[48],50:u[49],51:u[50],52:u[51],53:u[52],54:u[53],55:u[54],56:u[55],57:u[56],58:u[57],59:u[58]},t.exports.code={UNKNOWN:u[0],OK:u[1],EOF:u[2],EADDRINFO:u[3],EACCES:u[4],EAGAIN:u[5],EADDRINUSE:u[6],EADDRNOTAVAIL:u[7],EAFNOSUPPORT:u[8],EALREADY:u[9],EBADF:u[10],EBUSY:u[11],ECONNABORTED:u[12],ECONNREFUSED:u[13],ECONNRESET:u[14],EDESTADDRREQ:u[15],EFAULT:u[16],EHOSTUNREACH:u[17],EINTR:u[18],EINVAL:u[19],EISCONN:u[20],EMFILE:u[21],EMSGSIZE:u[22],ENETDOWN:u[23],ENETUNREACH:u[24],ENFILE:u[25],ENOBUFS:u[26],ENOMEM:u[27],ENOTDIR:u[28],EISDIR:u[29],ENONET:u[30],ENOTCONN:u[31],ENOTSOCK:u[32],ENOTSUP:u[33],ENOENT:u[34],ENOSYS:u[35],EPIPE:u[36],EPROTO:u[37],EPROTONOSUPPORT:u[38],EPROTOTYPE:u[39],ETIMEDOUT:u[40],ECHARSET:u[41],EAIFAMNOSUPPORT:u[42],EAISERVICE:u[43],EAISOCKTYPE:u[44],ESHUTDOWN:u[45],EEXIST:u[46],ESRCH:u[47],ENAMETOOLONG:u[48],EPERM:u[49],ELOOP:u[50],EXDEV:u[51],ENOTEMPTY:u[52],ENOSPC:u[53],EIO:u[54],EROFS:u[55],ENODEV:u[56],ESPIPE:u[57],ECANCELED:u[58]},t.exports.custom=e("./custom")(t.exports)}),e.define("/node_modules/errno/custom.js",function(e,t,n,r,i,s,o){function u(e,t,n){this.name=e,this.cause=typeof t!="string"?t:n,this.message=!t||typeof t=="string"?t:t.message}function a(e,t){Error.call(this),Error.captureStackTrace(this,arguments.callee),u.call(this,"CustomError",e,t)}function f(e,t,n){var r=function(n,r){u.call(this,t,n,r),t=="FilesystemError"&&(this.code=this.cause.code,this.path=this.cause.path,this.errno=this.cause.errno,this.message=(e.errno[this.cause.errno]?e.errno[this.cause.errno].description:this.cause.message)+(this.cause.path?" ["+this.cause.path+"]":"")),Error.call(this),Error.captureStackTrace(this,arguments.callee)};return r.prototype=n?new n:new a,r}a.prototype=new Error,t.exports=function(e){var t=f.bind(null,e);return{CustomError:a,FilesystemError:t("FilesystemError"),createError:t}}}),e.define("/src/indexedup.js",function(e,t,n,r,i,s,o){function h(e){this.idb=e,this.readable=!0,s.nextTick(this.init.bind(this))}function p(e,t){if(t)return t(e);throw e}function d(e,t){t==null&&(t={});if(typeof e!="string")return err=new a.InitializationError("Must provide a location for the database"),p(err);this._options={createIfMissing:t.createIfMissing||!1,errorIfExists:t.errorIfExists||!1,encoding:t.encoding||"json",sync:!1},this.storename="indexedup",this._location=e,this._status="new"}function v(e,t,n){return typeof t=="function"&&(n=t,t=null),newdb=new d(e,t),newdb.open(n)}__extends=function(e,t){function r(){this.constructor=e}for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};var u=e("stream"),a=e("./errors"),f=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB||window.oIndexedDB,l=window.IDBTransaction||window.mozIDBTransaction||window.webkitIDBTransaction||window.msIDBTransaction||window.oIndexedDB,c=window.IDBKeyRange||window.mozIDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange||window.oIDBKeyRange;__extends(h,u.Stream),h.prototype.init=function(){var e=this,t=this.idb.db.transaction([this.idb.storename],"readonly"),n=t.objectStore(this.idb.storename),r=c.lowerBound(0);return req=n.openCursor(r),req.onsuccess=function(t){var n=t.target.result;if(!n)return;return e.emit("data",n.value),n["continue"]()},req.onerror=function(t){return e.emit("error",t)},t.oncomplete=function(){return e.end()}},h.prototype.write=function(e,t){this.emit("data",e)},h.prototype.end=function(){this.emit("end")},d.prototype.open=function(e){function r(t){var t=null;try{t=this.getStore(!0)}catch(n){}return this._options.errorIfExists===!0&&t!=null?(err=new a.OpenError("Database already exists (errorIfExists: true)"),p(err,e),!0):this._options.createIfMissing===!1&&!t?(err=new a.OpenError("Database doesn't exist (createIfMissing: false)"),p(err,e),!0):(r=function(){},!1)}var t=this,n=f.open(this._location);n.onsuccess=function(i){t.db=n.result;if(r.call(_this))return;typeof e=="function"&&e(null,t),t._status="open"},n.onupgradeneeded=function(e){if(r.call(_this))return;var n=e.target.result;t.store=n.createObjectStore(_this.storename,{keyPath:"key"})},n.onerror=function(t){var n=new a.OpenError(t);return p(n,e)}},d.prototype.close=function(e){return this.isOpen()?(this.db=null,this._status="closed",e()):(err=new a.CloseError("Cannot close unopened database"),p(err,e))},d.prototype.isOpen=function(){return this._status==="open"},d.prototype.isClosed=function(){return this._status==="closed"},d.prototype.getTransaction=function(e){var t=e?"readwrite":"readonly";return this.db.transaction([this.storename],t)},d.prototype.getStore=function(e,t){return t==null&&(t=this.getTransaction(e)),t.objectStore(this.storename)},d.prototype.put=function(e,t,n,r){typeof n=="function"&&(r=n,n=null);if(!this.isOpen()){var i=new a.WriteError("Database has not been opened");return p(i,r)}if(e==null){var i=new a.WriteError("Invalid key");return p(i,r)}if(t==null){var i=new a.WriteError("Invalid data");return p(i,r)}req=this.getStore(!0).put({key:e,value:t}),req.onsuccess=function(e){return typeof r=="function"?r(null,req.result):void 0},req.onerror=function(e){return i=new a.WriteError(e),p(i,r)}},d.prototype.get=function(e,t,n){typeof t=="function"&&(n=t,t=n);if(!this.isOpen()){var r=new a.ReadError("Database has not been opened");return p(r,n)}if(e==null){var r=new a.ReadError("Invalid key");return p(r,n)}req=this.getStore().get(e),req.onsuccess=function(e){var t=req.result;typeof req.result!="undefined"&&typeof n=="function"?n(null,req.result.value):req.onerror()},req.onerror=function(t){var t=new a.NotFoundError("Key not found in database ["+e+"]");return p(t,n)}},d.prototype.del=function(e,t,n){typeof t=="function"&&(n=t,t=n);if(!this.isOpen()){var r=new a.WriteError("Database has not been opened");return p(r,n)}if(e==null){var r=new a.WriteError("Invalid key");return p(r,n)}req=this.getStore(!0)["delete"](e),req.onsuccess=function(e){typeof n=="function"&&n(null,req.result)},req.onerror=function(e){var t=new a.WriteError(e);if(typeof n=="function")return n(t);throw t}},d.prototype.batch=function(e,t){if(!this.isOpen()){var n=new a.WriteError("Database has not been opened");return p(n,t)}var r=this.getTransaction(!0),i=this.getStore(null,r);for(_i=0,_len=e.length;_i<_len;_i++){op=e[_i];if(op.type==null||op.key==null)continue;switch(op.type){case"put":i.put({key:op.key,value:op.value});break;case"get":i.delete(op.key)}}r.oncomplete=function(e){typeof t=="function"&&t()},r.onerror=function(e){var n=new a.WriteError(e);return p(n,t)}},d.prototype.readStream=function(){return new h(this)},(typeof t!="undefined"&&t!==null?t.exports:void 0)?t.exports=v:window.indexedup=v}),e("/src/indexedup.js")})()